(function(){"use strict";var e={8477:function(e,t,r){var a=r(6369),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("img",{attrs:{src:r(6949)}}),t("nav",[t("router-link",{attrs:{to:"/"}},[e._v("Oprema")]),e._v(" | "),t("router-link",{attrs:{to:"/narudzbine"}},[e._v("Narudžbine")]),e._v(" | "),t("router-link",{attrs:{to:"/prijavi-promenu"}},[e._v("Naruči")]),e._v(" | "),e.token?e._e():t("router-link",{attrs:{to:"/register"}},[e._v("Register | ")]),e.token?t("div",[t("router-link",{attrs:{to:"/profile"}},[e._v("Profil")]),t("b-nav-item",{on:{click:function(t){return e.logout()}}},[e._v(" | Log Out")])],1):t("router-link",{attrs:{to:"/login"}},[e._v("Log In")])],1),t("router-view")],1)},o=[],s=r(3822),i={computed:{...(0,s.rn)(["token"])},methods:{...(0,s.OI)(["removeToken","setToken"]),logout(){this.removeToken()}},mounted(){localStorage.token&&this.setToken(localStorage.token)}},u=i,l=r(1001),m=(0,l.Z)(u,n,o,!1,null,null,null),p=m.exports,d=r(2631),c=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"home"}},[t("HeaderC",{attrs:{title:e.headerTitle}}),t("div",[t("button",{on:{click:function(t){return e.prev()}}},[e._v("Prethodno")]),e._v(" ... "),t("button",{on:{click:function(t){return e.next()}}},[e._v("Sledeće")])]),e.svaOpremaIDs?t("OpremaList",{attrs:{opremaIDs:e.svaOpremaIDs.slice(10*e.current,10*e.current+10)}}):t("p",[e._v("Lista još nije spremna")])],1)},f=[],h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header"},[t("h1",[e._v(e._s(e.title))])])},v=[],b={name:"HeaderC",props:{title:String}},g=b,_=(0,l.Z)(g,h,v,!1,null,"8105df62",null),k=_.exports,O=function(){var e=this,t=e._self._c;return t("div",[e._l(e.oprema,(function(e){return t("OpremaSingle",{key:e.id,attrs:{oprema:e}})})),t("hr")],2)},w=[],y=(r(560),function(){var e=this,t=e._self._c;return t("div",{staticClass:"oprema",on:{click:function(t){return e.kliknutaOprema(e.oprema.id)}}},[t("h3",[e._v(e._s(e.oprema.naziv))])])}),P=[],z={name:"OpremaSingle",props:{oprema:Object},methods:{kliknutaOprema(e){this.$router.push({name:"OpremaView",params:{id:e}})}}},j=z,S=(0,l.Z)(j,y,P,!1,null,"4c7dd96e",null),T=S.exports,x={name:"OpremaList",components:{OpremaSingle:T},data(){return{oprema:[]}},props:{opremaIDs:Array},watch:{opremaIDs(e){this.oprema=[],e.map((e=>{this.getOprema(e.id).then((e=>this.oprema.push(e)))}))}},mounted(){this.opremaIDs.map((e=>{this.getOprema(e.id).then((e=>this.oprema.push(e)))}))},methods:{...(0,s.nv)(["getOprema"])}},C=x,N=(0,l.Z)(C,O,w,!1,null,"ecb6c8e2",null),$=N.exports,D={name:"HomeView",components:{HeaderC:k,OpremaList:$},data(){return{headerTitle:"Baza audio opreme",current:0}},computed:{...(0,s.rn)(["svaOpremaIDs"])},methods:{...(0,s.nv)(["fetchSvaOprema"]),next(){10*this.current<this.svaOpremaIDs.length&&this.current++},prev(){this.current>0&&this.current--}},mounted(){this.fetchSvaOprema()}},H=D,I=(0,l.Z)(H,c,f,!1,null,null,null),V=I.exports,Z=function(){var e=this,t=e._self._c;return t("div",[e.oprema?t("div",[t("HeaderC",{attrs:{title:e.oprema.naziv}}),t("div",{staticClass:"info"},[t("h3",[e._v("Kategorija")]),e._v(" "+e._s(e.oprema.kategorija.naziv)+" "),t("h3",[e._v("Cena")]),e._v(" "+e._s(e.oprema.cena)+" "),t("h3",[e._v("Tagovi")]),e._l(e.oprema.tagovi,(function(r){return t("div",{key:r.id,staticClass:"tagovi",attrs:{tag:r}},[t("b",[e._v(e._s(r.naziv))])])}))],2)],1):t("div",[e._v("Loading...")])])},L=[],A={name:"OpremaView",components:{HeaderC:k},data(){return{oprema:null}},mounted(){this.getOprema(this.$route.params.id).then((e=>{this.oprema=e,console.log(this.oprema)}))},methods:{...(0,s.nv)(["getOprema"])}},E=A,q=(0,l.Z)(E,Z,L,!1,null,"77b4b9a3",null),B=q.exports,U=function(){var e=this,t=e._self._c;return t("div",[t("HeaderC",{attrs:{title:"Narudžbine"}}),t("b-pagination",{attrs:{"total-rows":this.narudzbine.length,"per-page":e.perPage,"aria-controls":"tabelaNarudzbina"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}),t("b-table",{attrs:{striped:"",hover:"",items:this.narudzbine,fields:e.fields,"per-page":e.perPage,"current-page":e.currentPage,id:"tabelaNarudzbina"}})],1)},R=[],J={name:"NarudzbineView",components:{HeaderC:k},data(){return{perPage:10,currentPage:1,fields:[{key:"vreme_narucivanja",sortable:!0,label:"Vreme Naručivanja"},"adresa",{key:"status.naziv",sortable:!0,label:"status"},{key:"user.username",sortable:!0,label:"korisnik"}]}},computed:{...(0,s.rn)(["narudzbine"])},methods:{...(0,s.nv)(["fetchNarudzbine"])},mounted(){this.fetchNarudzbine(),console.log(this.narudzbine)}},M=J,F=(0,l.Z)(M,U,R,!1,null,"486d54b0",null),G=F.exports,K=function(){var e=this,t=e._self._c;return t("div",[t("HeaderC",{attrs:{title:e.headerTitle}}),t("b-alert",{attrs:{variant:e.statusnaPorukaTip,show:null!=e.statusnaPoruka}},[e._v(" "+e._s(e.statusnaPoruka)+" ")]),t("div",[t("b-container",{attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{sm:"4"}},[t("label",{attrs:{for:"oprema"}},[e._v("Oprema")])]),t("b-col",{attrs:{sm:"6"}},[t("b-form-input",{attrs:{id:"oprema",state:e.validnaOprema},model:{value:e.forma.oprema,callback:function(t){e.$set(e.forma,"oprema",t)},expression:"forma.oprema"}})],1)],1),t("br"),t("b-row",[t("b-col",{attrs:{sm:"4"}},[t("label",[e._v("Adresa")])]),t("b-col",{attrs:{sm:"6"}},[t("b-form-input",{attrs:{id:"adresa",state:e.validnaAdresa,rows:"4"},model:{value:e.forma.adresa,callback:function(t){e.$set(e.forma,"adresa",t)},expression:"forma.adresa"}})],1)],1)],1),t("br"),t("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.posalji()}}},[e._v("Naruči")])],1)],1)},X=[],Q={name:"PrijavaView",components:{HeaderC:k},data(){return{headerTitle:"Naruči opremu",statusnaPoruka:null,statusnaPorukaTip:null,forma:{oprema:null,user_id:null,status_id:"1",vreme_narucivanja:new Date,zakazano_vreme:new Date,telefon:"000000000"}}},computed:{validnaOprema(){return null==this.forma.oprema?null:this.forma.oprema.length>0},validnaAdresa(){return null==this.forma.adresa?null:this.forma.adresa.length>0},...(0,s.rn)(["token","user"])},methods:{posalji(){this.validnaOprema&&this.validnaAdresa&&(this.forma.user_id=this.user.userId.toString(),fetch("http://localhost:9000/narudzbina/",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},method:"POST",body:JSON.stringify(this.forma)}).then((e=>e.json())).then((e=>{console.log(e),e.error?(this.statusnaPoruka=e.error,this.statusnaPorukaTip="danger"):(this.statusnaPoruka="Narudzbina je uspešno poslata",this.statusnaPorukaTip="success")})))}},...(0,s.nv)(["getOprema"])},W=Q,Y=(0,l.Z)(W,K,X,!1,null,null,null),ee=Y.exports,te=function(){var e=this,t=e._self._c;return t("div",[t("HeaderC",{attrs:{title:e.headerTitle}}),t("div",{staticClass:"info"},[t("h3",[e._v("Username")]),e._v(" "+e._s(this.user.user)+" "),t("h3",[e._v("Email")]),e._v(" "+e._s(this.user.email)+" ")])],1)},re=[],ae={name:"ProfileView",components:{HeaderC:k},data(){return{}},computed:{...(0,s.rn)(["token","user"])},methods:{}},ne=ae,oe=(0,l.Z)(ne,te,re,!1,null,null,null),se=oe.exports,ie=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Header",{attrs:{subtitle:"Create account"}}),t("b-form",{on:{submit:e.onSubmit}},[t("b-form-group",{attrs:{label:"Email address:","label-for":"email"}},[t("b-form-input",{attrs:{id:"email",type:"email",placeholder:"Enter email",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("b-form-group",{attrs:{label:"User Name:","label-for":"username"}},[t("b-form-input",{attrs:{id:"username",placeholder:"Enter name",required:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[t("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Register")])],1)],1)},ue=[],le={name:"RegisterView",components:{Header:k},data(){return{form:{email:"",username:"",password:""}}},methods:{...(0,s.nv)(["register"]),onSubmit(e){e.preventDefault(),this.register(this.form),this.$router.push({name:"home"})}}},me=le,pe=(0,l.Z)(me,ie,ue,!1,null,"4145064e",null),de=pe.exports,ce=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Header",{attrs:{title:"Log In"}}),t("b-form",{on:{submit:e.onSubmit}},[t("b-form-group",{attrs:{label:"User Name:","label-for":"username"}},[t("b-form-input",{attrs:{id:"username",placeholder:"Enter name",required:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[t("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Login")])],1)],1)},fe=[],he={name:"LoginView",components:{Header:k},data(){return{form:{username:"",password:""}}},methods:{...(0,s.nv)(["login"]),onSubmit(e){e.preventDefault(),this.login(this.form),this.$router.push({name:"home"})}}},ve=he,be=(0,l.Z)(ve,ce,fe,!1,null,"1683f9b6",null),ge=be.exports;a["default"].use(d.ZP);const _e=[{path:"/",name:"home",component:V},{path:"/oprema/:id",name:"OpremaView",component:B},{path:"/narudzbine",name:"NarudzbineView",component:G},{path:"/prijavi-promenu",name:"PrijavaView",component:ee},{path:"/profile",name:"ProfileView",component:se},{path:"/register",name:"RegisterView",component:de},{path:"/login",name:"LoginView",component:ge}],ke=new d.ZP({mode:"history",base:"/",routes:_e});var Oe=ke,we=r(6681),ye=r(9425);r(7024);a["default"].use(s.ZP);var Pe=new s.ZP.Store({state:{narudzbine:[],oprema:[],svaOpremaIDs:[],token:[],user:[]},getters:{},mutations:{addNarudzbine(e,t){e.narudzbine=t},addOprema(e,t){e.oprema[t.id]=t},addSvaOpremaIDs(e,t){e.svaOpremaIDs=t},setToken(e,t){e.token=t,localStorage.token=t},removeToken(e){e.token="",localStorage.token=""},setUser(e,t){e.user=t}},actions:{async fetchNarudzbine({commit:e,state:t}){console.log(t.token),fetch("http://localhost:9000/narudzbina/",{headers:{Authorization:`Bearer ${t.token}`}}).then((e=>e.json())).then((t=>e("addNarudzbine",t)))},async getOprema({commit:e,state:t},r){return new Promise((a=>{t.oprema[r]?a(t.oprema[r]):fetch(`http://localhost:9000/oprema/${r}`,{headers:{Authorization:`Bearer ${t.token}`}}).then((e=>e.json())).then((t=>{e("addOprema",t),a(t)}))}))},async fetchSvaOprema({commit:e,state:t}){fetch("http://localhost:9000/oprema/",{headers:{Authorization:`Bearer ${t.token}`}}).then((e=>e.json())).then((t=>e("addSvaOpremaIDs",t)))},register({commit:e},t){fetch("http://127.0.0.1:9001/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((t=>e("setToken",t.token)))},login({commit:e},t){fetch("http://127.0.0.1:9001/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((t=>{t.msg?alert(t.msg):(e("setToken",t.token),e("setUser",t.user))}))}},modules:{}});a["default"].use(we.XG7),a["default"].use(ye.A7),a["default"].config.productionTip=!1,new a["default"]({router:Oe,store:Pe,render:e=>e(p)}).$mount("#app")},6949:function(e,t,r){e.exports=r.p+"img/logo.330c96b3.png"}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,a,n,o){if(!a){var s=1/0;for(m=0;m<e.length;m++){a=e[m][0],n=e[m][1],o=e[m][2];for(var i=!0,u=0;u<a.length;u++)(!1&o||s>=o)&&Object.keys(r.O).every((function(e){return r.O[e](a[u])}))?a.splice(u--,1):(i=!1,o<s&&(s=o));if(i){e.splice(m--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[a,n,o]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,o,s=a[0],i=a[1],u=a[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(u)var m=u(r)}for(t&&t(a);l<s.length;l++)o=s[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(m)},a=self["webpackChunkvezba4_3"]=self["webpackChunkvezba4_3"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(8477)}));a=r.O(a)})();
//# sourceMappingURL=app.4ef5374c.js.map